{% extends "fn_portal/fn_portal_base.html" %}

{% load humanize %}
{% load fn_portal_tags %}


{% block sidebar %}

{% sidebar_projects %}

{% endblock %}

    {% block content  %}



<div>

    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#gear" aria-controls="gear" role="tab" data-toggle="tab">Gear</a></li>
        <li role="presentation"><a href="#projects" aria-controls="projects" role="tab" data-toggle="tab">Projects</a></li>

    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="gear">



<h3>Gear:</h3>
{% if gear %}
<ul>
    {% for gr in gear %}

    <div class="panel panel-default">
        <div class="panel-heading">     <strong> {{ gr.gr }} - {{ gr.gr_des }} (
            <a href="{% url 'project_catch_counts2' gr.project.slug %}">{{ gr.project.prj_cd }})</a></strong></div>
        <div class="panel-body">
            {% if gr.gear_effs.values %}
            <table class="table">

                <thead>
                    <tr>
                        <td> eff </td>
                        <td> mesh </td>
                        <td> grlen </td>
                        <td> grht  </td>
                        <td> grwid </td>
                        <td> grcol </td>
                        <td> grmat </td>
                        <td> gryarn </td>
                        <td> grknot </td>
                        <td> eff_des </td>
                    </tr>
                </thead>

                {% for eff in gr.gear_effs.values %}
                <tr>
                    <td> {{eff.eff }} </td>
                    <td> {{eff.mesh }} </td>
                    <td> {{eff.grlen }} </td>
                    <td> {{eff.grht  }} </td>
                    <td> {{eff.grwid }} </td>
                    <td> {{eff.grcol }} </td>
                    <td> {{eff.grmat }} </td>
                    <td> {{eff.gryarn }} </td>
                    <td> {{eff.grknot }} </td>
                    <td> {{eff.eff_des }} </td>
                </tr>
                {% endfor %}
            </table>

            {% else %}
            <p>No detailed effort information currently available.</p>
            {% endif %}


        </div>
    </div>

    {% endfor %}

</ul>
{% else %}
<p> '{{ gear_code }}' is missing from the FN013 table! </p>
{% endif %}
        </div>
        <div role="tabpanel" class="tab-pane" id="projects">
            <h4>{{ gear_code }} was used in:</h4>

            <table class="table">
                <thead>
                    <tr>
                        <td>Year</td>
                        <td>Project Code</td>
                        <td>Project Name</td>
                        <td>Samples</td>
                    </tr>
                </thead>
                {% for project in projects %}
                <tr>
                    <td>{{ project.year }}</td>
                    <td><a href="{% url 'project_catch_counts2' project.slug %}">{{ project.prj_cd }}</a></td>
                    <td>{{ project.prj_nm }}</td>
                    <td>{{ project.N }}</td>
                </tr>
                {% endfor %}
            </table>
            </div>
    </div>

</div>




    {% endblock %}

    {% block scripts %}

    <script type="text/javascript">
        $( document ).ready(function() {
        // prepare the sidebar by expanding just the current year
        var my_year={{ project.year }}{{sample.project.year}};
        var div_name = "#project-year-" + my_year;
        $(div_name).show();

        });
    </script>


    {% endblock %}
